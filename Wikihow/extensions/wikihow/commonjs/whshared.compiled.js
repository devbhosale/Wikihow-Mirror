WH.shared=function(){function t(a){u.push(a)}function n(a,b){var d=null,f=0,c=function(){f=0;d=null;a.apply()};return function(){var e=x(),g=b-(e-f);0>=g||g>b?(d&&(clearTimeout(d),d=null),f=e,a.apply()):d||(d=setTimeout(c,g))}}function m(){for(var a=!1,b=window.innerHeight||document.documentElement.clientHeight,d=0;d<l.length;d+=1){var f=l[d];if(!f.isLoaded){var c=f,e=c.element.getBoundingClientRect(),a=e.top,g=e.bottom;0==c.lastTop-e.top&&window.scrollY!=c.lastY&&(a-=window.scrollY,g-=window.scrollY);
c.lastTop=e.top;c.lastY=window.scrollY;var c=b,e=52,h=2*c,e=e-h,c=c+h;(a>=e&&a<=c||g>=e&&g<=c||a<=e&&g>=c)&&f.load();a=!0}}!a&&l.length&&(window.removeEventListener("scroll",k),k=null)}function p(a){if(a&&a.element)if(document.addEventListener&&a.finishedLoadingEvent){a.alt&&(a.element.alt=a.alt);a.loaderRemoved=!1;var b=document.createElement("div");b.className="loader";for(var d=0;3>d;d++){var f=document.createElement("div");f.className="loader-dot";b.appendChild(f)}var c=document.createElement("div");
c.className="loading-container";c.appendChild(b);a.element.parentElement.appendChild(c);a.element.addEventListener(a.finishedLoadingEvent,function(){0==a.loaderRemoved&&(this.parentElement.removeChild(c),a.loaderRemoved=!0,"undefined"!==typeof a.element.classList&&a.element.classList.remove("img-loading-hide"))})}else"undefined"!==typeof a.element.classList&&a.element.classList.remove("img-loading-hide")}function v(a){this.lastTop=a.getBoundingClientRect().top;this.lastY=window.scrollY;this.isVisible=
this.isLoaded=!1;this.element=a;this.load=function(){}}function y(a){v.call(this,a);this.alt=a.alt;a.alt="";this.finishedLoadingEvent="load";this.src=a.getAttribute("data-src");if(q&&this.src){var b=this.src.split(".").pop();"jpg"!==b&&"png"!==b||!this.src.match(/images(_[a-z]{2})?\/thumb\//)||this.src.match(/(\.[a-zA-Z]+){2}$/)||(this.src+=".webp")}a&&void 0!==a.classList&&a.classList.add("img-loading-hide");this.load=function(){this.element.setAttribute("src",this.src);this.isLoaded=!0;p(this)}}
function z(a){v.call(this,a);this.finishedLoadingEvent="loadeddata";this.isPlaying=!1;this.src="https://www.wikihow.com/video"+this.element.getAttribute("data-src");(this.poster=this.element.getAttribute("data-poster"))&&"jpg"==this.poster.split(".").pop()&&q&&(this.poster+=".webp");this.noAutoplay=this.element.getAttribute("data-noautoplay");this.play=function(){this.element.play();this.isPlaying=!0};this.pause=function(){this.element.pause();this.isPlaying=!1};this.load=function(){this.element.setAttribute("poster",
this.poster);!r||this.noAutoplay||0!=window.WH.isMobile&&!0!==window.wgIsMainPage?this.finishedLoadingEvent=null:(this.element.setAttribute("src",this.src),this.play());this.isLoaded=!0;this.noAutoplay||p(this)}}var u=[],l=[],k,r,w=!1,x=Date.now||function(){return(new Date).getTime()},h=navigator.userAgent,q=h.match(/Linux/)&&h.match(/Android/)||h.match(/Opera/)||h.match(/Chrome/)&&!h.match(/Edge/);window.onresize=function(){u.forEach(function(a){a()})};t(m);r=function(){var a=window.document.createElement("video");
a.setAttribute("muted","");a.setAttribute("playsinline","");a.setAttribute("webkit-playsinline","");a.muted=!0;a.playsinline=!0;a.webkitPlaysinline=!0;a.setAttribute("height","0");a.setAttribute("width","0");a.style.position="fixed";a.style.top=0;a.style.width=0;a.style.height=0;a.style.opacity=0;try{var b=a.play();b&&b["catch"]&&b.then(function(){})["catch"](function(){})}catch(d){}return!a.paused}();k=n(m,500);window.addEventListener?window.addEventListener("scroll",k):w=!0;return{throttle:n,TOP_MENU_HEIGHT:52,
autoPlayVideo:r,webpSupport:q,addScrollLoadItem:function(a){a=document.getElementById(a);var b=null;"img"===a.nodeName.toLowerCase()?b=new y(a):"video"===a.nodeName.toLowerCase()&&(b=new z(a));b&&l.push(b);var d=a.getAttribute("data-width")||a.getAttribute("width"),f=a.getAttribute("data-height")||a.getAttribute("height");0<d&&(a.parentElement.style.paddingTop=f/d*100+"%");m();w?b.load():k||(k=n(m,500),window.addEventListener("scroll",k))},videoRoot:"https://www.wikihow.com/video",setupLoader:p,addResizeFunction:t,
loadAllImages:function(){for(var a=0;a<l.length;a++){var b=l[a];b.isLoaded||b.load()}}}}();
