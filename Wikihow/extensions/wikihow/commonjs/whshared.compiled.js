WH.shared=function(){function t(a){m.push(a)}function n(a,b){var c=null,f=0,d=function(){f=0;c=null;a.apply()};return function(){var e=x(),g=b-(e-f);0>=g||g>b?(c&&(clearTimeout(c),c=null),f=e,a.apply()):c||(c=setTimeout(d,g))}}function l(){for(var a=!1,b=window.innerHeight||document.documentElement.clientHeight,c=0;c<g.length;c+=1){var f=g[c];if(!f.isLoaded){a=f;var d=a.element.getBoundingClientRect(),e={top:d.top,bottom:d.bottom};0==a.lastTop-d.top&&window.scrollY!=a.lastY&&(e.top-=window.scrollY,
e.bottom-=window.scrollY);a.lastTop=d.top;a.lastY=window.scrollY;a=e;d=b;e=52;var h=2*d;e-=h;d+=h;(a.top>=e&&a.top<=d||a.bottom>=e&&a.bottom<=d||a.top<=e&&a.bottom>=d)&&f.load();a=!0}}!a&&g.length&&(window.removeEventListener("scroll",k),k=null)}function p(a){if(a&&a.element)if(document.addEventListener&&a.finishedLoadingEvent){a.alt&&(a.element.alt=a.alt);a.loaderRemoved=!1;var b=document.createElement("div");b.className="loader";for(var c=0;3>c;c++){var f=document.createElement("div");f.className=
"loader-dot";b.appendChild(f)}var d=document.createElement("div");d.className="loading-container";d.appendChild(b);a.element.parentElement.appendChild(d);a.element.addEventListener(a.finishedLoadingEvent,function(){0==a.loaderRemoved&&(this.parentElement.removeChild(d),a.loaderRemoved=!0,"undefined"!==typeof a.element.classList&&a.element.classList.remove("img-loading-hide"))})}else"undefined"!==typeof a.element.classList&&a.element.classList.remove("img-loading-hide")}function u(a){this.lastTop=
a.getBoundingClientRect().top;this.lastY=window.scrollY;this.isVisible=this.isLoaded=!1;this.element=a;this.load=function(){}}function q(a){if(!a)return"";if(!r)return a;var b=a.split(".").pop();"jpg"!==b&&"png"!==b||!a.match(/images(_[a-z]{2})?\/thumb\//)||a.match(/(\.[a-zA-Z]+){2}$/)||(a+=".webp");return a}function y(a){u.call(this,a);this.alt=a.alt;a.alt="";this.finishedLoadingEvent="load";this.src=a.getAttribute("data-src");this.src=q(this.src);a&&void 0!==a.classList&&a.classList.add("img-loading-hide");
this.load=function(){this.element.setAttribute("src",this.src);this.isLoaded=!0;p(this)}}function z(a){u.call(this,a);this.finishedLoadingEvent="loadeddata";this.isPlaying=!1;this.src="https://www.wikihow.com/video"+this.element.getAttribute("data-src");this.poster=this.element.getAttribute("data-poster");(this.poster=q(this.poster))&&"jpg"==this.poster.split(".").pop()&&r&&(this.poster+=".webp");this.noAutoplay=this.element.getAttribute("data-noautoplay");this.play=function(){this.element.play();
this.isPlaying=!0};this.pause=function(){this.element.pause();this.isPlaying=!1};this.load=function(){this.element.setAttribute("poster",this.poster);!v||this.noAutoplay||0!=window.WH.isMobile&&!0!==window.wgIsMainPage?this.finishedLoadingEvent=null:(this.element.setAttribute("src",this.src),this.play());this.isLoaded=!0;this.noAutoplay||p(this)}}var m=[],g=[],w=!1,x=Date.now||function(){return(new Date).getTime()},h=navigator.userAgent,r=h.match(/Linux/)&&h.match(/Android/)||h.match(/Opera/)||h.match(/Chrome/)&&
!h.match(/Edge/);window.onresize=function(){m.forEach&&m.forEach(function(a){a()})};t(l);var v=function(){var a=window.document.createElement("video");a.setAttribute("muted","");a.setAttribute("playsinline","");a.setAttribute("webkit-playsinline","");a.muted=!0;a.playsinline=!0;a.webkitPlaysinline=!0;a.setAttribute("height","0");a.setAttribute("width","0");a.style.position="fixed";a.style.top=0;a.style.width=0;a.style.height=0;a.style.opacity=0;try{var b=a.play();b&&b.catch&&b.then(function(){}).catch(function(){})}catch(c){}return!a.paused}();
var k=n(l,500);window.addEventListener?window.addEventListener("scroll",k):w=!0;return{throttle:n,TOP_MENU_HEIGHT:52,autoPlayVideo:v,webpSupport:r,addScrollLoadItem:function(a){a=document.getElementById(a);var b=null;"img"===a.nodeName.toLowerCase()?b=new y(a):"video"===a.nodeName.toLowerCase()&&(b=new z(a));b&&g.push(b);var c=a.getAttribute("data-width")||a.getAttribute("width"),f=a.getAttribute("data-height")||a.getAttribute("height");0<c&&(a.parentElement.style.paddingTop=f/c*100+"%");l();w?b.load():
k||(k=n(l,500),window.addEventListener("scroll",k))},videoRoot:"https://www.wikihow.com/video",setupLoader:p,addResizeFunction:t,loadAllImages:function(){for(var a=0;a<g.length;a++){var b=g[a];b.isLoaded||b.load()}},getCompressedImageSrc:q}}();
